# ====================================
# EUREKA SERVICE DISCOVERY CONFIGURATION
# ====================================

# Application Name
spring.application.name=RR-Banking-Application

# ====================================
# EUREKA SERVER CONFIGURATION
# ====================================

# Enable Eureka Server (set to true to run as Eureka Server)
eureka.server.enabled=false

# Eureka Server Port (when running as server)
# server.port=8761

# Disable self-registration when running as server
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false

# Server URL for standalone server
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# Eureka Server Settings
eureka.server.enable-self-preservation=true
eureka.server.renewal-percent-threshold=0.85
eureka.server.eviction-interval-timer-in-ms=60000
eureka.server.response-cache-auto-expiration-in-seconds=180

# Peer communication timeout
eureka.server.peer-eureka-nodes-update-interval-ms=600000
eureka.server.peer-eureka-status-refresh-time-interval-ms=30000

# ====================================
# EUREKA CLIENT CONFIGURATION
# ====================================

# Enable Eureka Client (set to true to register with Eureka)
eureka.client.enabled=false

# Eureka Server URL
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# Registration settings
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

# Registry fetch interval (seconds)
eureka.client.registry-fetch-interval-seconds=30

# Instance renewal interval (heartbeat - seconds)
eureka.instance.lease-renewal-interval-in-seconds=30

# Instance expiration duration (seconds)
eureka.instance.lease-expiration-duration-in-seconds=90

# Instance settings
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}
eureka.instance.hostname=localhost

# Metadata for the instance
eureka.instance.metadata-map.version=1.0.0
eureka.instance.metadata-map.zone=primary
eureka.instance.metadata-map.profile=${spring.profiles.active:default}

# Health check
eureka.client.healthcheck.enabled=true
eureka.instance.health-check-url-path=/actuator/health
eureka.instance.status-page-url-path=/actuator/info
eureka.instance.home-page-url-path=/

# ====================================
# SERVICE DISCOVERY SETTINGS
# ====================================

# Enable service discovery for load balancing
spring.cloud.discovery.enabled=true

# Ribbon load balancer configuration
ribbon.eureka.enabled=true
ribbon.ReadTimeout=60000
ribbon.ConnectTimeout=60000

# ====================================
# ACTUATOR ENDPOINTS FOR EUREKA
# ====================================

# Expose Eureka-related endpoints
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.health.eureka.enabled=true

# ====================================
# LOGGING FOR SERVICE DISCOVERY
# ====================================

logging.level.com.netflix.eureka=INFO
logging.level.com.netflix.discovery=INFO
logging.level.com.RRBank.banking.discovery=DEBUG

# ====================================
# NOTES
# ====================================
# 
# To run as Eureka Server:
# 1. Set eureka.server.enabled=true
# 2. Set server.port=8761
# 3. Set eureka.client.register-with-eureka=false
# 4. Set eureka.client.fetch-registry=false
# 
# To run as Eureka Client:
# 1. Set eureka.client.enabled=true
# 2. Set eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
# 3. Set eureka.client.register-with-eureka=true
# 4. Set eureka.client.fetch-registry=true
# 
# Eureka Dashboard: http://localhost:8761
# 
# Service Discovery Endpoints:
# - GET /api/discovery/services - List all services
# - GET /api/discovery/services/{name} - Get service details
# - GET /api/discovery/status - Eureka status
# - GET /api/discovery/health - Services health
